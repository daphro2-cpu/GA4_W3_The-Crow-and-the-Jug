<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The Crow and the Jug â€“ Vocab Unscramble Practice</title>

<style>
  body{
    font-family:"Century Gothic", Arial, sans-serif;
    background:#f6f7fb;
    margin:0;
    padding:20px;
  }
  .container{max-width:1000px;margin:auto;}
  .header{
    display:flex;align-items:center;gap:16px;
    background:#ffffff;padding:14px 16px;
    border-radius:10px;
    box-shadow:0 2px 10px rgba(0,0,0,.08);
    margin-bottom:20px;
  }
  .header img{height:60px;}
  h1{margin:0;color:#5a3fa3;}
  .sub{font-size:14px;color:#444;}

  .box{
    background:#ffffff;
    padding:16px;
    margin-bottom:20px;
    border-radius:10px;
    box-shadow:0 2px 10px rgba(0,0,0,.08);
  }
  h2{color:#5a3fa3;margin-top:0;}
  .note{
    background:#f0edff;
    padding:10px;
    border-radius:8px;
    font-size:14px;
    border:1px solid rgba(90,63,163,.25);
    line-height:1.4;
  }

  .tiles{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px;}
  .tile{
    background:#5a3fa3;
    color:#fff;
    padding:6px 10px;
    border-radius:6px;
    cursor:pointer;
    font-weight:700;
    user-select:none;
  }
  .tile.used{opacity:.35;}

  .answerBox{
    margin-top:6px;
    min-height:32px;
    padding:6px 10px;
    border:2px dashed #bbb;
    border-radius:8px;
    font-weight:700;
    background:#fff;
  }

  .rowBtns{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;align-items:center;}
  .feedback{margin-left:8px;font-weight:800;}
  .good{color:#138a36;}
  .bad{color:#b00020;}

  button{
    padding:8px 14px;
    border:none;
    border-radius:8px;
    background:#5a3fa3;
    color:#fff;
    cursor:pointer;
    font-weight:700;
  }
  button.secondary{background:#333;}
  button.ghost{
    background:transparent;
    color:#5a3fa3;
    border:2px solid #5a3fa3;
  }
  button.small{
    font-size:12px;
    padding:4px 10px;
  }

  hr{border:none;border-top:1px solid #eee;margin:14px 0;}
  .scoreline{font-weight:700;margin-top:8px;}
  .footer{
    text-align:center;
    font-size:12px;
    color:#666;
    margin-top:20px;
  }
</style>
</head>

<body>
<div class="container">

  <!-- HEADER -->
  <div class="header">
    <img src="logo.png" alt="School Logo">
    <div>
      <h1>The Crow and the Jug</h1>
      <div class="sub">GA4 â€¢ Vocab Unscramble in Context</div>
    </div>
  </div>

  <!-- INTRO -->
  <div class="box">
    <div class="note">
      <b>How to play:</b><br>
      â€¢ Read the clue (meaning + sentence).<br>
      â€¢ Click the letters to build the missing word.<br>
      â€¢ You can reset <b>each word</b> if you need to.<br>
      â€¢ When you finish, click <b>Check</b>.
    </div>
  </div>

  <!-- PART 1: UNSCRAMBLE -->
  <div class="box">
    <h2>Part 1: Spelling Practice (Click to Unscramble)</h2>
    <p>All words are from todayâ€™s vocabulary list.</p>

    <ol id="spellingList"></ol>

    <button onclick="checkSpelling()">Check âœ…</button>
    <button class="secondary" onclick="resetSpelling()">Reset All ðŸ”„</button>

    <div class="scoreline">Score: <span id="spellScore">0/10</span></div>
  </div>

  <div class="footer">
    Practice makes you a stronger reader.
  </div>

</div>

<script>
/* =========================================================
   GA4 â€“ The Crow and the Jug
   Part 1: Click-to-unscramble in context
   Includes per-word reset + reset all
   Words: journey, desert, exhausted, dazzling, refreshed,
          drop, soar, come up with, locate, narrow
   ========================================================= */

const SPACE_TILE = "â ";

function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}

function normalize(s){
  return s.replace(/\s+/g," ").trim().toLowerCase();
}

// Build letter tiles from the target word/phrase (includes spaces)
function lettersFromWord(word){
  const letters = [];
  for(const ch of word.toLowerCase()){
    if(ch === " ") letters.push(SPACE_TILE);
    else letters.push(ch);
  }
  return shuffle(letters);
}

// Your 10 items (meaning + context sentence)
const spellingWords = [
  {
    word:"journey",
    meaning:"a long trip (noun)",
    sentence:"The crow was on a long ______ across the land."
  },
  {
    word:"desert",
    meaning:"a hot, dry place with sand (noun)",
    sentence:"He landed in a ______ with no water."
  },
  {
    word:"exhausted",
    meaning:"very tired (adjective)",
    sentence:"After flying all day, he felt ______."
  },
  {
    word:"dazzling",
    meaning:"very bright (adjective)",
    sentence:"The sun was ______ in the sky."
  },
  {
    word:"refreshed",
    meaning:"feeling better after rest or a drink (adjective)",
    sentence:"After drinking, the crow felt ______."
  },
  {
    word:"drop",
    meaning:"to let something fall (verb)",
    sentence:"He would ______ small stones into the jug."
  },
  {
    word:"soar",
    meaning:"to fly high in the sky (verb)",
    sentence:"Finally, he spread his wings and began to ______."
  },
  {
    word:"come up with",
    meaning:"to think of an idea (phrase)",
    sentence:"The crow stopped and thought. Then he ______ an idea."
  },
  {
    word:"locate",
    meaning:"to find (verb)",
    sentence:"He could not ______ any water at first."
  },
  {
    word:"narrow",
    meaning:"not wide (adjective)",
    sentence:"The jug opening was too ______ for his head."
  }
].map(item => ({
  ...item,
  letters: lettersFromWord(item.word)
}));

const list = document.getElementById("spellingList");

// Render items
spellingWords.forEach((item,i)=>{
  const li = document.createElement("li");
  li.innerHTML = `
    <div><strong>${item.meaning}</strong></div>
    <div class="note" style="margin:8px 0 8px 0;">
      ${item.sentence.replace("______","<b>______</b>")}
    </div>

    <div class="tiles" id="tiles${i}"></div>
    <div class="answerBox" id="ans${i}"></div>

    <div class="rowBtns">
      <button class="ghost small" onclick="resetOne(${i})">Reset this word</button>
      <span id="fb${i}" class="feedback"></span>
    </div>
  `;
  list.appendChild(li);

  const tiles = document.getElementById("tiles"+i);

  item.letters.forEach(l=>{
    const span = document.createElement("span");
    span.className = "tile";
    span.textContent = (l===SPACE_TILE) ? "â " : l;
    span.dataset.letter = l;
    span.onclick = () => toggleLetter(span,i);
    tiles.appendChild(span);
  });
});

// Click tiles to build answer
function toggleLetter(tile,i){
  const box = document.getElementById("ans"+i);
  const letter = tile.dataset.letter;

  if(tile.classList.contains("used")){
    tile.classList.remove("used");
    const current = box.textContent;
    const targetChar = (letter===SPACE_TILE) ? " " : letter;
    const idx = current.indexOf(targetChar);
    if(idx !== -1){
      box.textContent = current.slice(0, idx) + current.slice(idx+1);
    }
  }else{
    tile.classList.add("used");
    box.textContent += (letter===SPACE_TILE) ? " " : letter;
  }
}

// Check all answers
function checkSpelling(){
  let score = 0;
  spellingWords.forEach((item,i)=>{
    const ans = normalize(document.getElementById("ans"+i).textContent);
    const correct = normalize(item.word);
    const fb = document.getElementById("fb"+i);

    if(ans === correct){
      fb.textContent = "âœ”";
      fb.className = "feedback good";
      score++;
    }else{
      fb.textContent = "âœ–";
      fb.className = "feedback bad";
    }
  });
  document.getElementById("spellScore").textContent = score + "/10";
}

// Reset one item
function resetOne(i){
  document.getElementById("ans"+i).textContent = "";
  const fb = document.getElementById("fb"+i);
  fb.textContent = "";
  fb.className = "feedback";
  document.querySelectorAll(`#tiles${i} .tile`).forEach(t=>t.classList.remove("used"));
}

// Reset all
function resetSpelling(){
  spellingWords.forEach((_,i)=>resetOne(i));
  document.getElementById("spellScore").textContent = "0/10";
}
</script>

</body>
</html>
